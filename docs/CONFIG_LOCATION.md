# é…ç½®æ–‡ä»¶ä½ç½®å˜æ›´è¯´æ˜

## æ–°çš„ç›®å½•ç»“æ„

ä» v1.2.0 å¼€å§‹ï¼Œç¨‹åºä½¿ç”¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ `.submit` æ–‡ä»¶å¤¹å­˜å‚¨æ‰€æœ‰é…ç½®å’Œæ•°æ®ã€‚

### ç›®å½•å¸ƒå±€

```
~/.submit/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ sites/              # ç«™ç‚¹é…ç½®ç›®å½•
â”‚       â”œâ”€â”€ _template/      # é…ç½®æ¨¡æ¿
â”‚       â”‚   â””â”€â”€ site.yaml.example
â”‚       â”œâ”€â”€ site1.com/      # ç½‘ç«™1é…ç½®
â”‚       â”‚   â””â”€â”€ site.yaml
â”‚       â””â”€â”€ site2.com/      # ç½‘ç«™2é…ç½®
â”‚           â””â”€â”€ site.yaml
â””â”€â”€ data/
    â”œâ”€â”€ logs/               # æ—¥å¿—æ–‡ä»¶
    â”‚   â””â”€â”€ YYYY-MM-DD.log
    â””â”€â”€ submitted/          # æäº¤å†å²
        â”œâ”€â”€ site1.com/
        â”‚   â”œâ”€â”€ baidu.txt
        â”‚   â”œâ”€â”€ bing.txt
        â”‚   â””â”€â”€ google.txt
        â””â”€â”€ site2.com/
            â””â”€â”€ baidu.txt
```

## ä¸ºä»€ä¹ˆæ”¹å˜ï¼Ÿ

### ä¼˜ç‚¹

1. **ç¬¦åˆè§„èŒƒ**ï¼šéµå¾ª Unix/Linux åº”ç”¨çš„æ ‡å‡†åšæ³•
2. **é›†ä¸­ç®¡ç†**ï¼šæ‰€æœ‰é…ç½®å’Œæ•°æ®åœ¨ä¸€ä¸ªä½ç½®
3. **å¤šé¡¹ç›®å…±äº«**ï¼šä¸åŒç›®å½•ä¸‹çš„ç¨‹åºå‰¯æœ¬å…±äº«åŒä¸€é…ç½®
4. **å¤‡ä»½æ–¹ä¾¿**ï¼šåªéœ€å¤‡ä»½ `~/.submit` å³å¯
5. **æƒé™éš”ç¦»**ï¼šé…ç½®æ–‡ä»¶åœ¨ç”¨æˆ·ç›®å½•ï¼Œå®‰å…¨æ€§æ›´å¥½

### å¯¹æ¯”

**æ—§æ–¹å¼ï¼š**
```
project/
â”œâ”€â”€ config/sites/
â””â”€â”€ data/
```

**æ–°æ–¹å¼ï¼š**
```
~/.submit/
â”œâ”€â”€ config/sites/
â””â”€â”€ data/
```

## é¦–æ¬¡ä½¿ç”¨

### æ–°ç”¨æˆ·

ç¨‹åºé¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼š

```bash
./submit test
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ‰ æ¬¢è¿ä½¿ç”¨ Submit Sitemap!
ğŸ“‚ æ­£åœ¨åˆå§‹åŒ–åº”ç”¨ç›®å½•: /Users/username/.submit

âœ… åˆ›å»ºç¤ºä¾‹é…ç½®: /Users/username/.submit/config/sites/_template/site.yaml.example
âœ… åˆå§‹åŒ–å®Œæˆ!

ğŸ“ åç»­æ­¥éª¤:
   1. è¿›å…¥é…ç½®ç›®å½•: cd /Users/username/.submit/config/sites
   2. åˆ›å»ºä½ çš„ç½‘ç«™é…ç½®æ–‡ä»¶å¤¹
   3. å¤åˆ¶æ¨¡æ¿: cp _template/site.yaml.example yoursite.com/site.yaml
   4. ç¼–è¾‘é…ç½®æ–‡ä»¶
   5. è¿è¡Œæµ‹è¯•: submit test
```

### ç°æœ‰ç”¨æˆ·è¿ç§»

#### æ–¹æ³• 1: ä½¿ç”¨è¿ç§»è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
./migrate-config.sh
```

è„šæœ¬ä¼šï¼š
- æ£€æŸ¥ç°æœ‰é…ç½®
- åˆ›å»ºæ–°ç›®å½•ç»“æ„
- å¤åˆ¶æ‰€æœ‰ç«™ç‚¹é…ç½®
- è¿ç§»æäº¤å†å²
- å¯é€‰è¿ç§»æ—¥å¿—æ–‡ä»¶

#### æ–¹æ³• 2: æ‰‹åŠ¨è¿ç§»

```bash
# åˆ›å»ºç›®å½•
mkdir -p ~/.submit/config/sites
mkdir -p ~/.submit/data/{logs,submitted}

# å¤åˆ¶é…ç½®
cp -r config/sites/* ~/.submit/config/sites/

# å¤åˆ¶å†å²æ•°æ®
cp -r data/submitted/* ~/.submit/data/submitted/

# å¯é€‰ï¼šå¤åˆ¶æ—¥å¿—
cp -r data/logs/* ~/.submit/data/logs/
```

## é…ç½®ç®¡ç†

### æ·»åŠ æ–°ç½‘ç«™

```bash
# è¿›å…¥é…ç½®ç›®å½•
cd ~/.submit/config/sites

# åˆ›å»ºç½‘ç«™é…ç½®
mkdir mysite.com
cp _template/site.yaml.example mysite.com/site.yaml

# ç¼–è¾‘é…ç½®
vim mysite.com/site.yaml
```

### å¤‡ä»½é…ç½®

```bash
# å¤‡ä»½æ•´ä¸ªé…ç½®ç›®å½•
tar czf submit-backup-$(date +%Y%m%d).tar.gz ~/.submit

# ä»…å¤‡ä»½é…ç½®æ–‡ä»¶
tar czf submit-config-$(date +%Y%m%d).tar.gz ~/.submit/config
```

### æŸ¥çœ‹é…ç½®

```bash
# åˆ—å‡ºæ‰€æœ‰ç«™ç‚¹
ls ~/.submit/config/sites

# æŸ¥çœ‹ç‰¹å®šç«™ç‚¹é…ç½®
cat ~/.submit/config/sites/mysite.com/site.yaml
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
cat ~/.submit/data/logs/$(date +%Y-%m-%d).log

# å®æ—¶ç›‘æ§
tail -f ~/.submit/data/logs/$(date +%Y-%m-%d).log

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
ls -lh ~/.submit/data/logs/
```

### æŸ¥çœ‹å†å²è®°å½•

```bash
# æŸ¥çœ‹ç«™ç‚¹æäº¤å†å²
cat ~/.submit/data/submitted/mysite.com/baidu.txt

# ç»Ÿè®¡å·²æäº¤æ•°é‡
wc -l ~/.submit/data/submitted/mysite.com/*.txt
```

## è‡ªå®šä¹‰ä½ç½®

å¦‚æœä½ ä»ç„¶æƒ³ä½¿ç”¨è‡ªå®šä¹‰ä½ç½®ï¼Œå¯ä»¥é€šè¿‡ `-c` å‚æ•°æŒ‡å®šï¼š

```bash
./submit run -c /path/to/custom/config/sites
```

ä½†æ˜¯æ—¥å¿—å’Œå†å²è®°å½•ä»ç„¶ä¼šä½¿ç”¨ `~/.submit/data`ã€‚

## å¸¸è§é—®é¢˜

### Q: æˆ‘å¯ä»¥ä½¿ç”¨å¤šå¥—é…ç½®å—ï¼Ÿ

A: å¯ä»¥ï¼Œä½¿ç”¨ `-c` å‚æ•°æŒ‡å®šä¸åŒçš„é…ç½®ç›®å½•ï¼š

```bash
# æµ‹è¯•ç¯å¢ƒ
./submit run -c ~/test-config/sites

# ç”Ÿäº§ç¯å¢ƒ
./submit run -c ~/.submit/config/sites
```

### Q: é…ç½®æ–‡ä»¶å¯ä»¥å…±äº«å—ï¼Ÿ

A: å¯ä»¥ï¼Œå¤šä¸ªç”¨æˆ·å¯ä»¥å„è‡ªåœ¨è‡ªå·±çš„ä¸»ç›®å½•ä¸‹ç»´æŠ¤é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¬¦å·é“¾æ¥å…±äº«ï¼š

```bash
# åˆ›å»ºå…±äº«é…ç½®
ln -s /shared/submit/config ~/.submit/config
```

### Q: å¦‚ä½•åˆ é™¤æ‰€æœ‰é…ç½®ï¼Ÿ

A: ç›´æ¥åˆ é™¤ `.submit` ç›®å½•ï¼š

```bash
rm -rf ~/.submit
```

ä¸‹æ¬¡è¿è¡Œæ—¶ä¼šé‡æ–°åˆå§‹åŒ–ã€‚

### Q: ç¨‹åºæ›´æ–°åé…ç½®ä¼šä¸¢å¤±å—ï¼Ÿ

A: ä¸ä¼šã€‚é…ç½®åœ¨ç”¨æˆ·ç›®å½•ï¼Œä¸ç¨‹åºå®‰è£…ä½ç½®æ— å…³ã€‚

## æœ€ä½³å®è·µ

1. **å®šæœŸå¤‡ä»½**ï¼šä½¿ç”¨ cron å®šæœŸå¤‡ä»½é…ç½®
   ```bash
   0 0 * * 0 tar czf ~/backups/submit-$(date +\%Y\%m\%d).tar.gz ~/.submit
   ```

2. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå°†é…ç½®æ–‡ä»¶åŠ å…¥ git
   ```bash
   cd ~/.submit/config
   git init
   git add sites/
   git commit -m "Initial config"
   ```

3. **æ•æ„Ÿä¿¡æ¯**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†å·¥å…·
   - ä¸è¦æäº¤åŒ…å« token çš„é…ç½®åˆ°å…¬å¼€ä»“åº“
   - è€ƒè™‘ä½¿ç”¨ `.gitignore` æ’é™¤æ•æ„Ÿæ–‡ä»¶

4. **æ–‡æ¡£åŒ–**ï¼šåœ¨æ¯ä¸ªç«™ç‚¹é…ç½®ä¸­æ·»åŠ æ³¨é‡Š
   ```yaml
   # ç«™ç‚¹ï¼šæˆ‘çš„åšå®¢
   # ç®¡ç†å‘˜ï¼šå¼ ä¸‰
   # åˆ›å»ºæ—¥æœŸï¼š2026-01-23
   # è¯´æ˜ï¼šä¸ªäººæŠ€æœ¯åšå®¢
   ```

## æ•…éšœæ’é™¤

### é…ç½®ç›®å½•ä¸å­˜åœ¨

```bash
# æ£€æŸ¥ç›®å½•
ls -la ~/.submit

# é‡æ–°åˆå§‹åŒ–
./submit test
```

### æƒé™é—®é¢˜

```bash
# ä¿®å¤æƒé™
chmod 755 ~/.submit
chmod -R 644 ~/.submit/config/sites/*.yaml
```

### æ‰¾ä¸åˆ°é…ç½®

```bash
# æ£€æŸ¥é…ç½®è·¯å¾„
./submit test

# ä¼šæ˜¾ç¤ºï¼š
# ğŸ“‚ é…ç½®ç›®å½•: /Users/username/.submit/config/sites
```

## æ›´æ–°æ—¥å¿—

- **v1.2.0** (2026-01-23)
  - è¿ç§»åˆ° `~/.submit` ç›®å½•
  - æ·»åŠ è‡ªåŠ¨åˆå§‹åŒ–åŠŸèƒ½
  - æä¾›è¿ç§»è„šæœ¬
