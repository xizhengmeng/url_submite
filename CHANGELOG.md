# 更新日志

## [2.0.0] - 2026-01-23

### 新增功能 ✨

#### 1. 实时进度条显示
- **Sitemap解析进度**: 显示旋转动画，直观展示解析状态
- **URL提交进度**: 显示详细的进度条，包括当前进度和总数
- **进度条样式**: 美观的进度条UI，清晰易读

示例：
```
📥 正在获取sitemap...
解析中 ⠋
  ✓ 找到 1,250 个URL

📤 开始提交...
  [百度] [=====>           ] 50/100
  [百度] ✓ 成功: 98
```

#### 2. 详细日志系统
- **自动日志记录**: 所有操作自动记录到日志文件
- **按天分割**: 每天的日志保存到独立文件 (`data/logs/YYYY-MM-DD.log`)
- **多级日志**: INFO、SUCCESS、WARNING、ERROR、DEBUG
- **详细信息**: 包括配置加载、sitemap解析、URL过滤、提交结果等

日志示例：
```
2026/01/23 15:30:00 [INFO] ========== 提交任务开始 ==========
2026/01/23 15:30:01 [INFO] Sitemap解析完成 - URL: https://example.com/sitemap.xml, 找到 1250 个URL
2026/01/23 15:30:05 [SUCCESS] 提交完成 - 网站: example.com, 平台: baidu, 成功: 98
```

#### 3. Verbose 详细输出模式
- 新增 `-v` / `--verbose` 命令行选项
- 详细模式下同时输出日志到控制台和文件
- 适合调试和问题排查

使用方法：
```bash
./submit-sitemap run -v
```

#### 4. 增强的统计报告
- **总体统计**: 显示总提交数、成功数、失败数和成功率
- **多网站汇总**: 自动汇总所有网站的提交结果
- **格式化输出**: 使用分隔线和格式化布局，清晰易读

示例：
```
=============================================================
📊 总体统计:
  总提交: 300 个URL
  成功: 298
  失败: 2
  成功率: 99.3%
=============================================================
```

#### 5. 失败URL详细记录
- 记录所有提交失败的URL到日志
- 便于后续手动检查和重试
- 自动分类记录（不同平台分开记录）

### 改进 🔧

#### 代码结构
- 新增 `internal/logger` 模块，专门处理日志
- 改进错误处理和日志记录
- 优化进度显示逻辑

#### 用户体验
- 更友好的进度反馈
- 更详细的操作信息
- 更清晰的错误提示

#### 文档
- 新增 `FEATURES.md` - 功能特性详解
- 更新 `README.md` - 添加日志和进度条说明
- 更新 `QUICKSTART.md` - 添加日志查看命令
- 新增 `CHANGELOG.md` - 版本更新记录

### 技术栈

新增依赖：
- `github.com/schollz/progressbar/v3` - 进度条库

### 构建

```bash
# 一键构建所有平台
./build.sh

# 或使用 Makefile
make build
```

---

## [1.0.0] - 2026-01-23

### 首次发布 🎉

#### 核心功能
- ✅ 多站点管理
- ✅ 自动Sitemap解析（支持索引和压缩格式）
- ✅ 智能URL去重
- ✅ 配额管理
- ✅ 历史记录跟踪
- ✅ 三大搜索引擎支持（百度、Bing、Google）

#### 平台支持
- 百度站长平台API
- Bing IndexNow协议
- Google IndexNow协议（预留）

#### 命令
- `run` - 运行提交任务
- `stats` - 查看统计信息
- `reset` - 清除历史记录
- `test` - 测试配置
- `help` - 显示帮助

#### 构建工具
- `build.sh` - 构建脚本（彩色输出）
- `Makefile` - Make构建支持

#### 文档
- `README.md` - 完整文档
- `QUICKSTART.md` - 快速开始指南

---

## 版本规划

### [2.1.0] - 计划中
- [ ] 邮件通知功能
- [ ] Web管理界面
- [ ] 优先级策略配置
- [ ] Docker支持

### [2.2.0] - 计划中
- [ ] 更多搜索引擎支持
- [ ] 性能优化
- [ ] 并发提交优化
- [ ] 配置热重载

---

## 升级指南

### 从 1.0.0 升级到 2.0.0

1. **重新构建**
   ```bash
   ./build.sh
   ```

2. **无需修改配置文件**
   - 配置文件格式完全兼容
   - 无需任何改动

3. **新特性使用**
   ```bash
   # 使用新的进度条功能（默认启用）
   ./submit-sitemap run

   # 使用详细输出模式
   ./submit-sitemap run -v

   # 查看日志
   cat data/logs/$(date +%Y-%m-%d).log
   ```

4. **数据兼容性**
   - 历史记录完全兼容
   - 无需迁移数据
   - 可直接使用

---

## 反馈和建议

如有问题或建议，欢迎提交Issue或Pull Request！
